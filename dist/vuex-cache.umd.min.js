!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("debounce")):"function"==typeof define&&define.amd?define(["exports","debounce"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).VuexCache={},e.debounce)}(this,(function(e,t){"use strict";var n,r,a,c=function(e){return!!e&&"object"==typeof e},o=t.debounce((function(){for(var e=Array.from(h.entries()),t=function(){var e=r[n];e[1].value instanceof Promise&&e[1].value.then((function(t){e[1].value=t}))},n=0,r=e;n<r.length;n+=1)t();localStorage.setItem("VUEX-CACHE-STATE",JSON.stringify(e))}),2e3),u=function(e){return c(e[0])?[e[0].type,e[0],e[1]]:e},i=new Error("Can't generate key from parameters."),f=function(e){try{var t=u(e),n=t[0],r=t[1];return n+":"+(c(a=r)?JSON.stringify(a):String(a))}catch(e){return i}var a},l=function(e){return c(e)&&"number"==typeof e.timeout},s=function(e,t){var n="string"==typeof e[0]?e[2]:e[0];return l(n)?n.timeout:l(t)?t.timeout:0},p=function(e){return!!e&&Date.now()>e},h=(n=localStorage.getItem("VUEX-CACHE-STATE"),r=n&&JSON.parse(n)||[],new Map(r)),v=function(e,t){var n={dispatch:function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];var a=f(n);if(a===i)return e.dispatch.apply(e,n);var c=h.get(a)||{},u=c.value,l=c.expiresIn;if(u&&!p(l))return u;var v=s(n,t),d={expiresIn:v?Date.now()+v:void 0,value:e.dispatch.apply(e,n)};return h.set(a,d),o(),d.value.catch((function(e){return h.delete(a),Promise.reject(e)}))},has:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=f(e);if(n===i)return!1;var r=h.get(n);return c(r)&&!p(r.expiresIn)},clear:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=u(e),r=n[0];return r?Array.from(h.keys()).filter((function(e){return e.split(":")[0]===r})).reduce((function(e,t){return e+h.delete(t)}),0):(o(),!!h.clear())},delete:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=f(e);return n!==i&&(o(),h.delete(n))},state:function(){return h}};for(var r in Object.defineProperty(e,"cache",{value:n,writable:!1,enumerable:!0,configurable:!1}),e._modulesNamespaceMap){var a=d(e,"mapCacheActions",r);Object.defineProperty(a.context,"cache",{value:n,writable:!1,enumerable:!0,configurable:!1})}},d=function(e,t,n){return e._modulesNamespaceMap[n]},y=(a=function(e,t){var n,r={};return(n=t,Array.isArray(n)?n.map((function(e){return{key:e,val:e}})):Object.keys(n).map((function(e){return{key:e,val:n[e]}}))).forEach((function(t){var n=t.key,a=t.val;r[n]=function(){for(var t=this,n=[],r=arguments.length;r--;)n[r]=arguments[r];var c=this.$store.cache.dispatch;if(e){var o=d(this.$store,"mapCacheActions",e);if(!o)return;c="function"==typeof a?function(n){for(var r,a=[],c=arguments.length-1;c-- >0;)a[c]=arguments[c+1];(r=o.context.cache.dispatch).call.apply(r,[t.$store.cache,""+e+n].concat(a))}:o.context.cache.dispatch}return"function"==typeof a?a.call.apply(a,[this,c].concat(n)):c.call.apply(c,[this.$store.cache,""+e+a].concat(n))}})),r},function(e,t){return"string"!=typeof e?(t=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),a(e,t)});e.cacheAction=function(e,t){return function(n,r){return v(n,t),e.call(this,n,r)}},e.default=function(e){return function(t){return v(t,e)}},e.mapCacheActions=y,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=vuex-cache.umd.min.js.map
