!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).VuexCache={})}(this,(function(e){"use strict";var t,r,n,a=function(e){return!!e&&"object"==typeof e},c=function(){for(var e=Array.from(p.entries()),t=function(){var e=n[r];e[1].value instanceof Promise&&e[1].value.then((function(t){e[1].value=t}))},r=0,n=e;r<n.length;r+=1)t();localStorage.setItem("VUEX-CACHE-STATE",JSON.stringify(e))},o=function(e){return a(e[0])?[e[0].type,e[0],e[1]]:e},i=new Error("Can't generate key from parameters."),u=function(e){try{var t=o(e),r=t[0],n=t[1];return r+":"+(a(c=n)?JSON.stringify(c):String(c))}catch(e){return i}var c},f=function(e){return a(e)&&"number"==typeof e.timeout},l=function(e,t){var r="string"==typeof e[0]?e[2]:e[0];return f(r)?r.timeout:f(t)?t.timeout:0},s=function(e){return!!e&&Date.now()>e},p=(t=localStorage.getItem("VUEX-CACHE-STATE"),r=t&&JSON.parse(t)||[],new Map(r)),h=function(e,t){var r={dispatch:function(){for(var r=[],n=arguments.length;n--;)r[n]=arguments[n];var a=u(r);if(a===i)return e.dispatch.apply(e,r);var o=p.get(a)||{},f=o.value,h=o.expiresIn;if(f&&!s(h))return f;var v=l(r,t),y={expiresIn:v?Date.now()+v:void 0,value:e.dispatch.apply(e,r)};return p.set(a,y),c(),y.value.catch((function(e){return p.delete(a),Promise.reject(e)}))},has:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=u(e);if(r===i)return!1;var n=p.get(r);return a(n)&&!s(n.expiresIn)},clear:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=o(e),n=r[0];return n?Array.from(p.keys()).filter((function(e){return e.split(":")[0]===n})).reduce((function(e,t){return e+p.delete(t)}),0):(c(),!!p.clear())},delete:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=u(e);return r!==i&&(c(),p.delete(r))},state:function(){return p}};for(var n in Object.defineProperty(e,"cache",{value:r,writable:!1,enumerable:!0,configurable:!1}),e._modulesNamespaceMap){var f=v(e,"mapCacheActions",n);Object.defineProperty(f.context,"cache",{value:r,writable:!1,enumerable:!0,configurable:!1})}},v=function(e,t,r){return e._modulesNamespaceMap[r]},y=(n=function(e,t){var r,n={};return(r=t,Array.isArray(r)?r.map((function(e){return{key:e,val:e}})):Object.keys(r).map((function(e){return{key:e,val:r[e]}}))).forEach((function(t){var r=t.key,a=t.val;n[r]=function(){for(var t=this,r=[],n=arguments.length;n--;)r[n]=arguments[n];var c=this.$store.cache.dispatch;if(e){var o=v(this.$store,"mapCacheActions",e);if(!o)return;c="function"==typeof a?function(r){for(var n,a=[],c=arguments.length-1;c-- >0;)a[c]=arguments[c+1];(n=o.context.cache.dispatch).call.apply(n,[t.$store.cache,""+e+r].concat(a))}:o.context.cache.dispatch}return"function"==typeof a?a.call.apply(a,[this,c].concat(r)):c.call.apply(c,[this.$store.cache,""+e+a].concat(r))}})),n},function(e,t){return"string"!=typeof e?(t=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),n(e,t)});e.cacheAction=function(e,t){return function(r,n){return h(r,t),e.call(this,r,n)}},e.default=function(e){return function(t){return h(t,e)}},e.mapCacheActions=y,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=vuex-cache.umd.min.js.map
